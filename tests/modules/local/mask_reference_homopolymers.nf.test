nextflow_process {

    name "Test Process MASK_REFERENCE_HOMOPOLYMERS"
    script "modules/local/mask_reference_homopolymers.nf"
    process "MASK_REFERENCE_HOMOPOLYMERS"

    test("Should run without failures") {

        when {
            params {
                refseq_fasta = "${projectDir}/tests/example_data/dummy_targeted_ref.fasta"
                homopolymer_threshold = 4
            }
            process {
                """
                input[0] = params.refseq_fasta
                input[1] = params.homopolymer_threshold
                """
            }
        }

        then {
            assert process.success
            assert process.out.masked_fasta
            assert path(process.out.masked_fasta.get(0)).md5 == "cd351dfe7e59821a3872ee677a81cb74"
        }

    }

}